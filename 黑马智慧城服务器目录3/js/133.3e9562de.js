"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[133],{8133:function(t,r,e){e.r(r),e.d(r,{default:function(){return l}});e(4114);var s=function(){var t=this,r=t._self._c;return r("div",{staticClass:"search"},[r("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(r){return t.$router.go(-1)}}}),r("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:t.querSearch||"搜索商品","show-action":""},on:{click:function(r){return t.$router.push("/search")}},scopedSlots:t._u([{key:"action",fn:function(){return[r("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),r("div",{staticClass:"sort-btns"},[r("div",{ref:"all",staticClass:"sort-item",on:{click:t.orderAll}},[t._v("综合")]),r("div",{ref:"sales",staticClass:"sort-item",on:{click:t.orderSales}},[t._v("销量")]),r("div",{ref:"price",staticClass:"sort-item",on:{click:t.orderPrice}},[t._v("价格 ")])]),r("div",{staticClass:"goods-list"},t._l(t.proList,(function(t){return r("GoodsItem",{key:t.goods_id,attrs:{item:t}})})),1)],1)},i=[],o=e(1879),a=e(7867),c={name:"SearchIndex",components:{GoodsItem:o.A},computed:{querSearch(){return this.$route.query.search}},data(){return{page:1,proList:[],sortType:"all",sortPrice:1,orderName:""}},methods:{async render(){const{data:{list:t}}=await(0,a.Cd)({categoryId:this.$route.query.categoryId,goodsName:this.querSearch,page:this.page,sortType:this.sortType,sortPrice:this.sortPrice});this.proList=t.data,this.page=t.current_page},highlight(t){this.orderName&&this.$refs[this.orderName].classList.remove("highlight"),this.orderName=t,this.$refs[this.orderName].classList.add("highlight")},orderAll(){this.sortType="all",this.render(),this.highlight("all")},orderSales(){this.sortType="sales",this.render(),this.highlight("sales")},orderPrice(){this.sortType="price",this.sortPrice?this.sortPrice=0:this.sortPrice=1,this.render(),this.highlight("price")}},created(){this.render()}},n=c,h=e(1656),d=(0,h.A)(n,s,i,!1,null,"d1381caa",null),l=d.exports},7867:function(t,r,e){e.d(r,{B7:function(){return o},Cd:function(){return i},Yv:function(){return a}});var s=e(5720);const i=t=>{const{categoryId:r,goodsName:e,page:i,sortType:o,sortPrice:a}=t;return s.A.get("/goods/list",{params:{categoryId:r,goodsName:e,page:i,sortType:o,sortPrice:a}})},o=t=>s.A.get("/goods/detail",{params:{goodsId:t}}),a=(t,r)=>s.A.get("/comment/listRows",{params:{goodsId:t,limit:r}})}}]);
//# sourceMappingURL=133.3e9562de.js.map